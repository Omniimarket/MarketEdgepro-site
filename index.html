<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MarketProEdge - Market Pulse</title>
  <!-- AOS CSS for scroll animations -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <style>
    /* Basic Reset */
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      line-height: 1.6;
      color: #333;
    }

    /* Header */
    header {
      background-color: #333;
      color: #fff;
      padding: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header .logo {
      font-size: 1.5em;
      font-weight: bold;
    }
    header nav a {
      color: #fff;
      text-decoration: none;
      margin-left: 15px;
      font-size: 1em;
      transition: color 0.3s ease;
    }
    header nav a:hover {
      color: #f4f4f4;
    }

    /* Hero Section */
    #hero {
      background: url('https://source.unsplash.com/1600x900/?stock,market') no-repeat center/cover;
      min-height: 60vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 40px;
      color: #fff;
    }
    #hero h1 {
      font-size: 2.5em;
      margin-bottom: 20px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.6);
    }
    #hero p {
      font-size: 1.2em;
      margin-bottom: 30px;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.6);
    }
    .cta-button {
      background-color: #e67e22;
      color: #fff;
      padding: 15px 30px;
      border: none;
      border-radius: 4px;
      font-size: 1.1em;
      text-decoration: none;
      transition: transform 0.2s ease, background-color 0.2s ease;
    }
    .cta-button:hover {
      transform: translateY(-3px);
      background-color: #cf711f;
    }

    /* Market Pulse Section (Signals) */
    #market-pulse {
      padding: 50px 20px;
      background-color: #fff;
    }
    #market-pulse h2 {
      text-align: center;
      margin-bottom: 40px;
      font-size: 2em;
    }
    .ticker-grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
    }
    .ticker-box {
      background: #fafafa;
      border: 1px solid #ddd;
      border-radius: 6px;
      padding: 20px;
      width: 280px;
      transition: transform 0.2s, box-shadow 0.2s;
      position: relative;
    }
    .ticker-box:hover {
      transform: translateY(-5px);
      box-shadow: 0px 4px 8px rgba(0,0,0,0.1);
    }
    .ticker-box h3 {
      margin-bottom: 10px;
    }
    .ticker-box p {
      font-size: 0.95em;
      margin-bottom: 8px;
    }
    .ticker-box button {
      background-color: #3498db;
      color: #fff;
      border: none;
      padding: 10px 15px;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }
    .ticker-box button:hover {
      background-color: #2980b9;
    }

    /* News Section */
    #news {
      padding: 50px 20px;
      background-color: #f9f9f9;
    }
    #news h2 {
      text-align: center;
      margin-bottom: 30px;
      font-size: 2em;
    }
    #news .news-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 30px;
    }
    /* Example news widget placeholder */
    .news-widget, .twitter-widget {
      background-color: #fff;
      border: 1px solid #ddd;
      padding: 20px;
      width: 500px;
      border-radius: 6px;
    }
    /* Footer */
    footer {
      background-color: #333;
      color: #fff;
      text-align: center;
      padding: 20px;
    }

    /* Modal styles */
    .modal {
      display: none; /* Hidden by default */
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow-y: auto;
      background-color: rgba(0, 0, 0, 0.7);
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .modal.show {
      display: block;
      opacity: 1;
    }
    .modal-content {
      background-color: #fefefe;
      margin: 8% auto;
      padding: 20px;
      border: 1px solid #888;
      width: 80%;
      max-width: 800px;
      border-radius: 8px;
      position: relative;
      transform: translateY(-20px);
      transition: transform 0.3s ease;
    }
    .modal.show .modal-content {
      transform: translateY(0);
    }
    .modal-content .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }
    .modal-content .close:hover,
    .modal-content .close:focus {
      color: #000;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header data-aos="fade-down">
    <div class="logo">MarketProEdge</div>
    <nav>
      <a href="index.html">Home</a>
      <a href="signals.html">Market Pulse</a>
      <a href="news.html">News</a>
      <a href="login.html">Login</a>
    </nav>
  </header>

  <!-- Hero Section -->
  <section id="hero" data-aos="fade-up">
    <h1>MarketProEdge: Uncover Market Insights That Drive Smarter Decisions</h1>
    <p>Enjoy real-time analysis—including volume profiles, RSI & moving averages—plus curated news that empowers your trade ideas.</p>
    <a href="signup.html" class="cta-button">Start Your Free Analysis</a>
  </section>

  <!-- Market Pulse Section (formerly Signals) -->
  <section id="market-pulse" data-aos="fade-up">
    <h2>Market Pulse</h2>
    <div id="tickerContainer" class="ticker-grid">
      <!-- Ticker boxes will be dynamically injected here via script.js -->
    </div>
  </section>

  <!-- News Section -->
  <section id="news" data-aos="fade-up">
    <h2>USA Stock Market News</h2>
    <div class="news-container">
      <!-- Example TradingView News Widget -->
      <div class="news-widget">
        <div class="tradingview-widget-container">
          <div id="tradingview_news_widget"></div>
          <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-news.js" async>
          {
              "feedMode": "market",
              "title": "Market News",
              "locale": "en",
              "symbols": [
                {
                  "s": "NASDAQ:AAPL",
                  "d": "Apple"
                },
                {
                  "s": "NASDAQ:MSFT",
                  "d": "Microsoft"
                }
              ],
              "colorTheme": "light",
              "isTransparent": false,
              "width": "100%",
              "height": "400"
          }
          </script>
        </div>
      </div>
      <!-- Example Twitter Timeline Widget -->
      <div class="twitter-widget">
        <a class="twitter-timeline" href="https://twitter.com/WalterBloomberg?ref_src=twsrc%5Etfw">Tweets by WalterBloomberg</a>
        <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 MarketProEdge | <a style="color: inherit;" href="about.html">Learn more about our methodology</a></p>
  </footer>

  <!-- Modal for Interactive Chart -->
  <div id="chartModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <canvas id="myChart" width="600" height="400"></canvas>
    </div>
  </div>

  <!-- Scripts: Chart.js, AOS, and custom script -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>
    // Initialize AOS for scroll animations
    AOS.init({
      duration: 1000,
      once: true,
    });
  </script>
  <!-- Custom script that handles Market Pulse and modal chart (ensure only one copy is loaded) -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Only run if ticker container is present
      if (!document.getElementById("tickerContainer")) return;
      
      console.log("Custom Market Pulse script running...");

      // Replace this URL with your actual JSON data source if needed
      fetch("./marketproedge_signals.json")
        .then(response => {
          if (!response.ok) throw new Error("Network response was not okay: " + response.statusText);
          return response.json();
        })
        .then(data => {
          console.log("Fetched JSON Data:", data);
          const container = document.getElementById("tickerContainer");
          container.innerHTML = "";
          Object.keys(data).forEach(ticker => {
            const info = data[ticker];
            if (Object.keys(info).length === 0) return;

            // Create ticker box div
            const box = document.createElement("div");
            box.classList.add("ticker-box");
            box.innerHTML = `
              <h3>${ticker}</h3>
              <p><strong>Point of Control (1H):</strong> ${info.POC_1h ?? "No Data"}</p>
              <p><strong>Upper Trading Level (1H):</strong> ${info.VAH_1h ?? "No Data"}</p>
              <p><strong>Lower Trading Level (1H):</strong> ${info.VAL_1h ?? "No Data"}</p>
              <p><strong>Point of Control (Daily):</strong> ${info.POC_1day ?? "No Data"}</p>
              <p><strong>Upper Trading Level (Daily):</strong> ${info.VAH_1day ?? "No Data"}</p>
              <p><strong>Lower Trading Level (Daily):</strong> ${info.VAL_1day ?? "No Data"}</p>
              <button class="view-chart">View Chart</button>
            `;
            // Bind click event for modal chart
            box.querySelector("button.view-chart").addEventListener("click", function () {
              drawChart(ticker, info);
              openModal();
            });
            container.appendChild(box);
          });
        })
        .catch(error => {
          console.error("Error fetching market data:", error);
        });

      // Modal logic
      function openModal() {
        document.getElementById("chartModal").classList.add("show");
      }
      document.querySelector(".modal-content .close").addEventListener("click", function () {
        document.getElementById("chartModal").classList.remove("show");
      });

      // Chart drawing function using Chart.js
      function drawChart(ticker, info) {
        const ctx = document.getElementById('myChart').getContext('2d');
        const chartData = {
          labels: ["Point of Control", "Upper Trading Level", "Lower Trading Level"],
          datasets: [
            {
              label: "1H",
              data: [info.POC_1h || null, info.VAH_1h || null, info.VAL_1h || null],
              backgroundColor: 'rgba(54, 162, 235, 0.5)',
            },
            {
              label: "Daily",
              data: [info.POC_1day || null, info.VAH_1day || null, info.VAL_1day || null],
              backgroundColor: 'rgba(255, 99, 132, 0.5)',
            }
          ]
        };

        // If an existing chart exists, destroy it before creating a new one
        if (window.myChartInstance) window.myChartInstance.destroy();

        window.myChartInstance = new Chart(ctx, {
          type: 'bar',
          data: chartData,
          options: {
            responsive: true,
            plugins: {
              title: {
                display: true,
                text: `Market Pulse for ${ticker}`
              },
              tooltip: {
                enabled: true
              }
            },
            animation: {
              duration: 800
            }
          }
        });
      }
    });
  </script>
</body>
</html>
